{"version":3,"sources":["api/library.jsx","components/Shape.jsx","components/Autocomplete.jsx","components/Input.jsx","components/BooksList.jsx","App.jsx","index.jsx"],"names":["BASE_URL","loadBooks","a","request","fetch","response","json","BooksListShape","volumeInfo","PropTypes","shape","title","string","isRequired","authors","array","imageLinks","smallThumbnail","InputShape","query","handleQuery","func","handleSubmit","autocomplete","arrayOf","autocompleteError","bool","autocompleteStatus","clickAutocomplete","Autocomplete","memo","className","map","id","type","onClick","propTypes","Input","onChange","value","disabled","BooksList","books","src","undefined","alt","author","App","useState","setBooks","setQuery","statusError","setStatusError","setAutocomplete","setAutocompleteError","setAutocompleteStatus","useCallback","event","target","queryAutocomplete","preventDefault","loadData","loadAutocomplete","part","items","debounce","totalItems","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b72b3323.chunk.js","sourcesContent":["const BASE_URL = 'https://www.googleapis.com/books/v1/volumes?q=';\n\nexport const loadBooks = async(request = '') => {\n  const response = await fetch(BASE_URL + request);\n\n  return response.json();\n};\n","import PropTypes from 'prop-types';\n\nexport const BooksListShape = {\n  volumeInfo: PropTypes.shape({\n    title: PropTypes.string.isRequired,\n    // eslint-disable-next-line react/forbid-prop-types\n    authors: PropTypes.array.isRequired,\n    imageLinks: PropTypes.shape({\n      smallThumbnail: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n}.isRequired;\n\nexport const InputShape = {\n  query: PropTypes.string.isRequired,\n  handleQuery: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n  autocomplete: PropTypes.arrayOf(BooksListShape).isRequired,\n  autocompleteError: PropTypes.bool.isRequired,\n  autocompleteStatus: PropTypes.bool.isRequired,\n  clickAutocomplete: PropTypes.func.isRequired,\n}.isRequired;\n","import React, { memo } from 'react';\nimport PropTypes from 'prop-types';\nimport { BooksListShape } from './Shape';\n\nexport const Autocomplete = memo(({ autocomplete, clickAutocomplete }) => (\n  <div className=\"form__item ui selection dropdown\">\n    {autocomplete.map(({ volumeInfo, id }) => (\n      <button\n        key={id}\n        type=\"button\"\n        className=\"autocomplete__item\"\n        onClick={() => clickAutocomplete(volumeInfo.title)}\n      >\n        {volumeInfo.title}\n      </button>\n    ))}\n  </div>\n));\n\nAutocomplete.propTypes = {\n  clickAutocomplete: PropTypes.func.isRequired,\n  autocomplete: PropTypes.arrayOf(BooksListShape).isRequired,\n}.isRequired;\n","import React, { memo } from 'react';\nimport { InputShape } from './Shape';\nimport { Autocomplete } from './Autocomplete';\n\nexport const Input = memo(({\n  query,\n  handleQuery,\n  handleSubmit,\n  autocomplete,\n  autocompleteError,\n  autocompleteStatus,\n  clickAutocomplete,\n}) => (\n  <div className=\"container__right\">\n    <form className=\"form\">\n      <input\n        className=\"form__item ui selection dropdown\"\n        onChange={handleQuery}\n        value={query}\n      />\n\n      <button\n        className=\"form__item ui primary button\"\n        onClick={handleSubmit}\n        type=\"submit\"\n        disabled={autocompleteError}\n      >\n        search\n      </button>\n    </form>\n\n    {\n      autocompleteStatus\n      && (autocompleteError\n        ? <div className=\"error\">No matches</div>\n        : (\n          <Autocomplete\n            clickAutocomplete={clickAutocomplete}\n            autocomplete={autocomplete}\n          />\n        ))\n    }\n  </div>\n));\n\nInput.propTypes = InputShape;\n","import React, { memo } from 'react';\nimport PropTypes from 'prop-types';\nimport { BooksListShape } from './Shape';\n\nexport const BooksList = memo(({ books }) => (\n  <div className=\"books\">\n    {books.map(({ volumeInfo, id }) => (\n      <div className=\"book\" key={id}>\n        <img\n          className=\"book__img\"\n          src={volumeInfo.imageLinks === undefined\n            ? '/images/logo_book.png'\n            : volumeInfo.imageLinks.smallThumbnail}\n          alt={volumeInfo.title}\n        />\n\n        <div>\n          <h4>\n            {volumeInfo.title}\n          </h4>\n        </div>\n\n        <div>\n          {volumeInfo.authors && volumeInfo.authors.map(author => (\n            <div key={author}>{author}</div>\n          ))}\n        </div>\n      </div>\n    ))}\n  </div>\n));\n\nBooksList.propTypes = {\n  books: PropTypes.arrayOf(BooksListShape).isRequired,\n}.isRequired;\n","import React, { useState, useCallback } from 'react';\nimport debounce from 'lodash.debounce';\nimport './App.scss';\nimport { loadBooks } from './api/library';\nimport { Input } from './components/Input';\nimport { BooksList } from './components/BooksList';\n\nexport const App = () => {\n  const [books, setBooks] = useState([]);\n  const [query, setQuery] = useState('');\n  const [statusError, setStatusError] = useState(false);\n  const [autocomplete, setAutocomplete] = useState([]);\n  const [autocompleteError, setAutocompleteError] = useState(false);\n  const [autocompleteStatus, setAutocompleteStatus] = useState(false);\n\n  const handleQuery = useCallback((event) => {\n    const { value } = event.target;\n\n    setQuery(value);\n\n    if (value === '') {\n      setAutocompleteStatus(false);\n\n      return;\n    }\n\n    setAutocompleteStatus(true);\n    queryAutocomplete(value);\n  }, []);\n\n  const handleSubmit = useCallback((event) => {\n    event.preventDefault();\n\n    if (query === '') {\n      setAutocompleteError(true);\n      setStatusError(true);\n\n      return;\n    }\n\n    loadData(query);\n    setAutocompleteStatus(false);\n  }, [query]);\n\n  const clickAutocomplete = useCallback((title) => {\n    loadData(title);\n    setQuery(title);\n    setAutocompleteStatus(false);\n  }, []);\n\n  const loadAutocomplete = useCallback(async(part) => {\n    const response = await loadBooks(part);\n    const result = response.items;\n\n    if (result === undefined) {\n      setAutocompleteError(true);\n\n      return;\n    }\n\n    setAutocompleteError(false);\n    setAutocomplete(response.items);\n  }, []);\n\n  const queryAutocomplete = useCallback(debounce(loadAutocomplete, 500), []);\n\n  const loadData = useCallback(async(title) => {\n    const response = await loadBooks(title);\n\n    if (response.totalItems === 0) {\n      setStatusError(true);\n    } else {\n      setStatusError(false);\n      setBooks(response.items);\n    }\n  }, []);\n\n  return (\n    <div className=\"container\">\n      <div className=\"container__left\">\n        {statusError\n          ? (\n            <img\n              className=\"container__img\"\n              src=\"/images/not_found.png\"\n              alt=\"not found\"\n            />\n          )\n          : <BooksList books={books} />}\n      </div>\n\n      <Input\n        query={query}\n        handleQuery={handleQuery}\n        handleSubmit={handleSubmit}\n        autocomplete={autocomplete}\n        autocompleteError={autocompleteError}\n        autocompleteStatus={autocompleteStatus}\n        clickAutocomplete={clickAutocomplete}\n      />\n    </div>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\nimport 'semantic-ui-css/semantic.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}